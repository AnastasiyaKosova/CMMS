<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AMMS — Стартовая страница</title>
<style>
  body {margin:0; font-family: Inter, sans-serif; background: #0f1724; color: #e6eef6; display:flex; justify-content:center; align-items:flex-start; padding-top:20px;}
  .screen {display:none; padding:20px; border-radius:12px; background: #0b1220; width:90%; max-width:800px; box-shadow:0 6px 18px rgba(2,6,23,0.6);}
  .active {display:block;}
  h2 {margin-top:0;}
  input, textarea, select {width:100%; padding:8px; margin-bottom:12px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:#e6eef6;}
  button {padding:10px 16px; border:none; border-radius:10px; background:#06b6d4; color:#052026; cursor:pointer; margin-top:4px;}
  .note {font-size:12px; color:#94a3b8; margin-bottom:12px;}
  table {width:100%; border-collapse:collapse;}
  th, td {padding:8px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.03); font-size:13px;}
  th {color:#94a3b8; font-weight:600;}
  .card {background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04)); border-radius:12px; padding:14px; box-shadow:0 6px 18px rgba(2,6,23,0.6); margin-bottom:12px;}
  .btn {display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:0; background:#06b6d4; color:#052026; cursor:pointer;}
  .back-btn {background:#64748b;}
</style>
</head>
<body>

<!-- Экран 1: Вход -->
<div id="login-screen" class="screen active">
  <h2>Вход в систему</h2>
  <label>Логин</label>
  <input id="login" type="text" placeholder="Введите логин">
  <label>Пароль</label>
  <input id="password" type="password" placeholder="Введите пароль">
  <button id="login-btn">Войти</button>
  <button id="register-btn">Регистрация</button>
  <div class="note">Политика безопасности / <a href="#" style="color:#06b6d4;">Забыли пароль?</a></div>
  <div id="login-msg" class="note"></div>
</div>

<!-- Экран 1.1: Регистрация -->
<div id="register-screen" class="screen">
  <h2>Регистрация нового пользователя</h2>
  <label>Логин</label>
  <input id="reg-login" type="text" placeholder="Введите логин">
  <label>Пароль</label>
  <input id="reg-password" type="password" placeholder="Введите пароль">
  <label>Повтор пароля</label>
  <input id="reg-password-repeat" type="password" placeholder="Повторите пароль">
  <button id="create-account-btn">Создать аккаунт</button>
  <button class="back-btn btn" id="back-to-login-from-reg">Назад</button>
  <div id="reg-msg" class="note"></div>
</div>

<!-- Экран 2: Материалы для изучения -->
<div id="material-screen" class="screen">
  <h2>Материалы для изучения</h2>
  <div id="material-content" contenteditable="true" style="min-height:150px; padding:10px; border:1px solid rgba(255,255,255,0.05); border-radius:8px; margin-bottom:12px; background: rgba(255,255,255,0.02);">Добавьте текст или материалы для изучения</div>
  <button id="save-material-btn">Сохранить и продолжить</button>
  <button class="back-btn btn" id="back-to-login-1">Назад</button>
  <div class="note">Только для администратора: редактирование материалов.</div>
</div>

<!-- Экран 3: Мини-опросник -->
<div id="quiz-screen" class="screen">
  <h2>Мини-опросник</h2>
  <div id="quiz-content">
    <p>Вопрос: Что делает эта система?</p>
    <input type="text" id="quiz-answer" placeholder="Ваш ответ">
    <button id="submit-quiz-btn">Отправить ответ</button>
    <button class="back-btn btn" id="back-to-material">Назад</button>
    <div id="quiz-msg" class="note"></div>
  </div>
</div>

<!-- Экран 4: Рабочее окно -->
<div id="workspace-screen" class="screen">
  <h2>Рабочее окно — регистрация остановок</h2>
  <button class="back-btn btn" id="back-to-login-2">Выйти</button>
  <div class="card">
    <button id="add-bg-btn" class="btn">Добавить фон</button>
    <button id="add-text-btn" class="btn">Добавить текст</button>
  </div>
  <div class="card">
    <h3>Список остановок (заглушка)</h3>
    <table>
      <thead><tr><th>Время</th><th>Оборудование</th><th>Тип</th><th>Описание</th></tr></thead>
      <tbody>
        <tr><td>12:00</td><td>Буровая установка</td><td>Аварийная</td><td>Остановка</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  const loginScreen = document.getElementById('login-screen');
  const registerScreen = document.getElementById('register-screen');
  const materialScreen = document.getElementById('material-screen');
  const quizScreen = document.getElementById('quiz-screen');
  const workspaceScreen = document.getElementById('workspace-screen');
  const loginBtn = document.getElementById('login-btn');
  const loginMsg = document.getElementById('login-msg');

  const users = { 'admin':'admin', 'editor':'editor' }; // локальное хранение пользователей для прототипа

  loginBtn.addEventListener('click', ()=>{
    const login = document.getElementById('login').value.trim();
    const password = document.getElementById('password').value.trim();

    if(users[login] && users[login] === password){
      loginScreen.classList.remove('active');
      if(login === 'admin'){
        workspaceScreen.classList.add('active');
      } else {
        materialScreen.classList.add('active');
      }
    } else {
      loginMsg.textContent = 'Неверный логин или пароль';
    }
  });

  document.getElementById('register-btn').addEventListener('click', ()=>{
    loginScreen.classList.remove('active');
    registerScreen.classList.add('active');
  });

  document.getElementById('back-to-login-from-reg').addEventListener('click', ()=>{
    registerScreen.classList.remove('active');
    loginScreen.classList.add('active');
  });

  document.getElementById('create-account-btn').addEventListener('click', ()=>{
    const login = document.getElementById('reg-login').value.trim();
    const password = document.getElementById('reg-password').value.trim();
    const passwordRepeat = document.getElementById('reg-password-repeat').value.trim();
    const regMsg = document.getElementById('reg-msg');

    if(!login || !password) { regMsg.textContent = 'Заполните все поля'; return; }
    if(password !== passwordRepeat) { regMsg.textContent = 'Пароли не совпадают'; return; }
    if(users[login]) { regMsg.textContent = 'Пользователь уже существует'; return; }

    users[login] = password;
    regMsg.textContent = 'Пользователь создан';
    registerScreen.classList.remove('active');
    materialScreen.classList.add('active');
  });

  const saveMaterialBtn = document.getElementById('save-material-btn');
  saveMaterialBtn.addEventListener('click', ()=>{
    const content = document.getElementById('material-content').innerHTML;
    console.log('Сохраненный материал:', content);
    materialScreen.classList.remove('active');
    quizScreen.classList.add('active');
  });

  const submitQuizBtn = document.getElementById('submit-quiz-btn');
  submitQuizBtn.addEventListener('click', ()=>{
    const answer = document.getElementById('quiz-answer').value.trim().toLowerCase();
    const quizMsg = document.getElementById('quiz-msg');
    if(answer.includes('система')){
      quizMsg.textContent = 'Ответ верный! Переход на рабочее окно.';
      setTimeout(()=>{
        quizScreen.classList.remove('active');
        workspaceScreen.classList.add('active');
      },500);
    } else {
      quizMsg.textContent = 'Ответ неверный. Попробуйте ещё раз.';
    }
  });

  document.getElementById('add-bg-btn').addEventListener('click', ()=>alert('Добавить фон — пока заглушка'));
  document.getElementById('add-text-btn').addEventListener('click', ()=>alert('Добавить текст — пока заглушка'));

  document.getElementById('back-to-login-1').addEventListener('click', ()=>{
    materialScreen.classList.remove('active');
    loginScreen.classList.add('active');
  });
  document.getElementById('back-to-material').addEventListener('click', ()=>{
    quizScreen.classList.remove('active');
    materialScreen.classList.add('active');
  });
  document.getElementById('back-to-login-2').addEventListener('click', ()=>{
    workspaceScreen.classList.remove('active');
    loginScreen.classList.add('active');
  });
</script>
</body>
</html>
